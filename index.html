<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An R package to helps you to generate sensible predictions for individual games or an entire season of the Premier League • PremPredict</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An R package to helps you to generate sensible predictions for individual games or an entire season of the Premier League">
<meta name="description" content="Provides functions to predict the outcome of Premier League games and seasons.">
<meta property="og:description" content="Provides functions to predict the outcome of Premier League games and seasons.">
<meta property="og:image" content="/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">PremPredict</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/p0bs/PremPredict/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="prempredict-">PremPredict 
<a class="anchor" aria-label="anchor" href="#prempredict-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The <code>PremPredict</code> package helps you to generate sensible predictions for individual games or an entire season of the Premier League.</p>
<p>You can find my automatically-updated Premier League predictor (that uses this codebase) on <a href="https://github.com/p0bs/PL-scan?tab=readme-ov-file#predicting-this-seasons-premier-league" class="external-link">the landing page of its repo</a>.</p>
<p><br></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of PremPredict from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"p0bs/PremPredict"</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="approach">Approach<a class="anchor" aria-label="anchor" href="#approach"></a>
</h2>
<p>I use a simplified version of <a href="https://github.com/DavidFirth/alt3code" class="external-link">David Firth’s approach</a> and data from the <a href="https://github.com/openfootball/football.json" class="external-link">Open Football repo</a> on GitHub to predict the outcome of this season’s Premier League.</p>
<p>The predictions are based on a team’s strength, given its performance in recent times. But how should we define <em>recent</em>? In order to duck this question, you could choose a number of different time periods. Please note that 0.0% and 100.0% outcomes in the results do not necessarily signify certainty in their specific assessment, as:</p>
<ul>
<li>this model is typically used with more than 1,000 simulations; and more pertinently</li>
<li>this model (like all models) is imperfect (but, I think, better than no model at all)</li>
</ul>
<p><br></p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Here is an example analysis, using data collected on 12th May 2025 (which wasn’t quite up to date by then).</p>
<p>First, we collect, combine and tidy the results data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/p0bs/PremPredict" class="external-link">PremPredict</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"example_thisSeason"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results_combined</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_results.html">get_results</a></span><span class="op">(</span><span class="va">example_thisSeason</span>, seasons <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">results_combined</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 652   9</span></span></code></pre></div>
<p>However, we only wish to look back a full year from the current point (which is where each team has a small number of games remaining in the season).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">game_latest</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calc_game_latest.html">calc_game_latest</a></span><span class="op">(</span>results <span class="op">=</span> <span class="va">results_combined</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_results_filtered.html">get_results_filtered</a></span><span class="op">(</span></span>
<span>  results <span class="op">=</span> <span class="va">results_combined</span>, </span>
<span>  index_game_latest <span class="op">=</span> <span class="va">game_latest</span>, </span>
<span>  lookback_rounds <span class="op">=</span> <span class="fl">38L</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">results_filtered</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 433</span></span>
<span><span class="co">#&gt; Columns: 8</span></span>
<span><span class="co">#&gt; $ matchday &lt;date&gt; 2024-04-06, 2024-04-06, 2024-04-07, 2024-04-07, 2024-04-13, …</span></span>
<span><span class="co">#&gt; $ homeTeam &lt;chr&gt; "WOL", "BRI", "MUN", "TOT", "NEW", "NOT", "BOU", "LIV", "WHU"…</span></span>
<span><span class="co">#&gt; $ awayTeam &lt;chr&gt; "WHU", "ARS", "LIV", "NOT", "TOT", "WOL", "MUN", "CPA", "FUL"…</span></span>
<span><span class="co">#&gt; $ FTHG     &lt;dbl&gt; 1, 0, 2, 3, 4, 2, 2, 0, 0, 0, 6, 0, 2, 3, 5, 1, 5, 0, 2, 2, 0…</span></span>
<span><span class="co">#&gt; $ FTAG     &lt;dbl&gt; 2, 3, 2, 1, 0, 2, 2, 1, 2, 2, 0, 2, 0, 1, 2, 3, 0, 1, 0, 0, 4…</span></span>
<span><span class="co">#&gt; $ FTR      &lt;chr&gt; "A", "A", "D", "H", "H", "D", "D", "A", "A", "A", "H", "A", "…</span></span>
<span><span class="co">#&gt; $ played   &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T…</span></span>
<span><span class="co">#&gt; $ match    &lt;chr&gt; "220", "221", "222", "223", "224", "225", "226", "227", "228"…</span></span></code></pre></div>
<p>The number of rows isn’t 380, as some games this season have yet to be played and some games from last year didn’t feature all of our teams from this season (as three teams were promoted from the Championship).</p>
<p>For reference, we can see the prevailing table.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_table_current</span> <span class="op">&lt;-</span> <span class="va">example_thisSeason</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/calc_table_current.html">calc_table_current</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_table_current</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/print_table_current.html">print_table_current</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Team</th>
<th align="right">Played</th>
<th align="right">GD</th>
<th align="right">Points</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">LIV</td>
<td align="right">32</td>
<td align="right">43</td>
<td align="right">76</td>
</tr>
<tr class="even">
<td align="left">ARS</td>
<td align="right">33</td>
<td align="right">34</td>
<td align="right">66</td>
</tr>
<tr class="odd">
<td align="left">NEW</td>
<td align="right">33</td>
<td align="right">18</td>
<td align="right">59</td>
</tr>
<tr class="even">
<td align="left">MCI</td>
<td align="right">33</td>
<td align="right">22</td>
<td align="right">58</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">33</td>
<td align="right">18</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="left">NOT</td>
<td align="right">32</td>
<td align="right">13</td>
<td align="right">57</td>
</tr>
<tr class="odd">
<td align="left">AST</td>
<td align="right">33</td>
<td align="right">6</td>
<td align="right">57</td>
</tr>
<tr class="even">
<td align="left">BOU</td>
<td align="right">33</td>
<td align="right">12</td>
<td align="right">49</td>
</tr>
<tr class="odd">
<td align="left">FUL</td>
<td align="right">33</td>
<td align="right">3</td>
<td align="right">48</td>
</tr>
<tr class="even">
<td align="left">BRI</td>
<td align="right">33</td>
<td align="right">0</td>
<td align="right">48</td>
</tr>
<tr class="odd">
<td align="left">BRE</td>
<td align="right">33</td>
<td align="right">6</td>
<td align="right">46</td>
</tr>
<tr class="even">
<td align="left">CPA</td>
<td align="right">33</td>
<td align="right">-4</td>
<td align="right">44</td>
</tr>
<tr class="odd">
<td align="left">EVE</td>
<td align="right">33</td>
<td align="right">-6</td>
<td align="right">38</td>
</tr>
<tr class="even">
<td align="left">MUN</td>
<td align="right">33</td>
<td align="right">-8</td>
<td align="right">38</td>
</tr>
<tr class="odd">
<td align="left">WOL</td>
<td align="right">33</td>
<td align="right">-13</td>
<td align="right">38</td>
</tr>
<tr class="even">
<td align="left">TOT</td>
<td align="right">32</td>
<td align="right">11</td>
<td align="right">37</td>
</tr>
<tr class="odd">
<td align="left">WHU</td>
<td align="right">33</td>
<td align="right">-18</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="left">IPS</td>
<td align="right">33</td>
<td align="right">-38</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="left">LEI</td>
<td align="right">32</td>
<td align="right">-45</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">SOU</td>
<td align="right">33</td>
<td align="right">-54</td>
<td align="right">11</td>
</tr>
</tbody>
</table>
<p>We can now model the strengths of the sides at home and away.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_model</span> <span class="op">&lt;-</span> <span class="va">results_filtered</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/model_prepare_frame.html">model_prepare_frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/model_run.html">model_run</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; gnm::gnm(formula = count ~ -1 + s + draw, eliminate = match, </span></span>
<span><span class="co">#&gt;     family = stats::quasipoisson, data = modelframe, start = rep(0, </span></span>
<span><span class="co">#&gt;         2 * nTeams + 1))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients of interest:</span></span>
<span><span class="co">#&gt; sARS_home  sAST_home  sBOU_home  sBRE_home  sBRI_home  sCHE_home  sCPA_home  </span></span>
<span><span class="co">#&gt;   2.11616    1.80472    0.83416    0.91304    0.54456    2.10914    0.91035  </span></span>
<span><span class="co">#&gt; sEVE_home  sFUL_home  sIPS_home  sLEI_home  sLIV_home  sMCI_home  sMUN_home  </span></span>
<span><span class="co">#&gt;   0.95829    0.62203   -2.27916   -1.22314    2.77280    2.07414    0.50124  </span></span>
<span><span class="co">#&gt; sNEW_home  sNOT_home  sSOU_home  sTOT_home  sWHU_home  sWOL_home  sARS_away  </span></span>
<span><span class="co">#&gt;   1.78552    1.27272   -2.91937    0.48145    0.01834   -0.42682    1.99077  </span></span>
<span><span class="co">#&gt; sAST_away  sBOU_away  sBRE_away  sBRI_away  sCHE_away  sCPA_away  sEVE_away  </span></span>
<span><span class="co">#&gt;   0.72014    0.68944    0.51242    0.70031    1.08462    1.07638   -0.09467  </span></span>
<span><span class="co">#&gt; sFUL_away  sIPS_away  sLEI_away  sLIV_away  sMCI_away  sMUN_away  sNEW_away  </span></span>
<span><span class="co">#&gt;   0.97085   -0.18998   -1.37943    1.87401    1.59837    0.10322    0.93390  </span></span>
<span><span class="co">#&gt; sNOT_away  sSOU_away  sTOT_away  sWHU_away  sWOL_away       draw  </span></span>
<span><span class="co">#&gt;   0.94902   -2.17842   -0.40044    0.21730    0.34709         NA  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Deviance:            698.4004 </span></span>
<span><span class="co">#&gt; Pearson chi-squared: 763.8907 </span></span>
<span><span class="co">#&gt; Residual df:         722</span></span></code></pre></div>
<p>[I will add further details and more explanation in due course.]</p>
<p>Next, we use these team strengths to model future games across the season.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_parameters_unplayed</span> <span class="op">&lt;-</span> <span class="va">data_model</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/model_extract_parameters.html">model_extract_parameters</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_points_expected_remaining</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/model_parameters_unplayed.html">model_parameters_unplayed</a></span><span class="op">(</span></span>
<span>  results <span class="op">=</span> <span class="va">results_filtered</span>,</span>
<span>  model_parameters <span class="op">=</span> <span class="va">data_parameters_unplayed</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/calc_points_expected_remaining.html">calc_points_expected_remaining</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/calc_points_expected_total.html">calc_points_expected_total</a></span><span class="op">(</span></span>
<span>  table_current <span class="op">=</span> <span class="va">data_table_current</span>,</span>
<span>  points_expected <span class="op">=</span> <span class="va">data_points_expected_remaining</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 20 × 2</span></span>
<span><span class="co">#&gt;    midName        Exp_Points_Ave</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Liverpool                88.7</span></span>
<span><span class="co">#&gt;  2 Arsenal                  75.9</span></span>
<span><span class="co">#&gt;  3 Man City                 69.1</span></span>
<span><span class="co">#&gt;  4 Newcastle                67.7</span></span>
<span><span class="co">#&gt;  5 Notts Forest             67.5</span></span>
<span><span class="co">#&gt;  6 Chelsea                  65.5</span></span>
<span><span class="co">#&gt;  7 Aston Villa              64.7</span></span>
<span><span class="co">#&gt;  8 Bournemouth              55.8</span></span>
<span><span class="co">#&gt;  9 Fulham                   55.5</span></span>
<span><span class="co">#&gt; 10 Brighton                 54.7</span></span>
<span><span class="co">#&gt; 11 Brentford                54.3</span></span>
<span><span class="co">#&gt; 12 Crystal Palace           50.1</span></span>
<span><span class="co">#&gt; 13 Everton                  44.4</span></span>
<span><span class="co">#&gt; 14 Man Utd                  43.1</span></span>
<span><span class="co">#&gt; 15 West Ham                 43.1</span></span>
<span><span class="co">#&gt; 16 Wolves                   43.1</span></span>
<span><span class="co">#&gt; 17 Tottenham                42.2</span></span>
<span><span class="co">#&gt; 18 Ipswich                  24.9</span></span>
<span><span class="co">#&gt; 19 Leicester                22.5</span></span>
<span><span class="co">#&gt; 20 Southampton              12.7</span></span></code></pre></div>
<p>On this basis, Liverpool look like strong favourites to win the season (which they actually did). However, to project the likelihood of them doing so, we need to simulate many possible outcomes.</p>
<p>[More to follow.]</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/p0bs/PremPredict/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/p0bs/PremPredict/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing PremPredict</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robin Penfold <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/p0bs/PremPredict/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/p0bs/PremPredict/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/p0bs/PremPredict" class="external-link"><img src="https://codecov.io/gh/p0bs/PremPredict/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Penfold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
